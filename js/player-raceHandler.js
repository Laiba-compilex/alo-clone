"undefined"==typeof raceHandler&&(raceHandler={}),raceHandler.getCFRace=function(){!function(){var t=new Date,e=t.getDay(),a=t.getDate()-t.getDay()+1;0==t.getDay()&&(a-=7);for(var n=new Date(t.setDate(a)),r=$j("#firstWeekTitle  th"),d=$j("#thisWeek tbody td"),o=0;o<7;o++){var l=$j(r[o]),s=$j(d[o]),g=new Date(n.getTime()+864e5*o);(o+1==e||6==o&&0==e)&&(l.addClass("today"),s.addClass("today")),l.html(g.getDate()+l.html())}}();var t=new Date;$j("#todayTitle").html(t.getFullYear()+" <span>"+I18N.get("month_"+(parseInt(t.getMonth())+1))+"</span>&nbsp;<span>"+I18N.get("cockfight.calendar")+"</span>");var e=t.getDate()-t.getDay()+1;0==t.getDay()&&(e-=7);var a=new Date(t.setDate(e));a=new Date(a.getFullYear(),a.getMonth(),a.getDate());var n=new Date(a.getTime()+6048e5-1e3);t=new Date;var r=new Date(n);r.setDate(n.getDate()+1);var d=new Date(t.getFullYear(),t.getMonth()+2,0);!function(t,e){for(var a=0,n=JCache.get("#calendar_container"),r=JCache.get("#date_template"),d=JCache.get("#eventList_template"),o=new Date(t.getFullYear(),t.getMonth()+1,0),l=t.getMonth()==e.getMonth()?e.getDate():o.getDate(),s=t.getMonth()+1,g=e.getMonth()+1,h=null,i=null,c=-1,p=t.getDate();p<=l;p++){if((c=(c+1)%7)%7==0){if(++a>3)return;h=r.clone().show(),i=d.clone().show(),n.append(h),n.append(i),ths=h.find("th"),tds=i.find("td")}$j(ths[c]).html(p).attr("day",p).attr("month",s),$j(tds[c]).attr("day",p).attr("month",s)}if(t.getMonth()!=e.getMonth())for(e=e.getDate(),s++,p=1;p<=e;p++){if((c=(c+1)%7)%7==0){if(++a>3)return;h=r.clone().show(),i=d.clone().show(),n.append(h),n.append(i),ths=h.find("th"),tds=i.find("td")}1==p?$j(ths[c]).html(p+'<span class="month-start">'+I18N.get("month_"+parseInt(g))+"</span>"):$j(ths[c]).html(p).attr("day",p).attr("month",s),$j(tds[c]).attr("day",p).attr("month",s)}}(r,d),$j.ajax({type:"POST",url:PageConfig.getEventInfoUrl,dataType:"JSON",success:function(e){!function(t,e,a){var n=$j("#thisWeek tbody tr td"),r=!1;for(var d in t){var o=t[d],l=o.date.split(" "),s=l[0].split("-"),g=new Date(s[0],s[1]-1,s[2]);if(!0!==r){if(g.getTime()<e.getTime())continue;r=!0}if(g.getTime()>a.getTime())break;var h=g.getDay(),i=h-1;0==h&&(i=6);var c=$j(n[i]),p=parseInt(c.attr("eventCount"));c.html(c.html()+`<dl><dt>${o.arena}</dt><dd>${l[1].substring(0,5)+" &nbspF"+o.matchcount}</dd></dl>`),c.attr("eventCount",p+1)}}(e,a,n),function(t,e){var a=JCache.get("#calendar_container");for(var n in t){var r=t[n],d=r.date.split(" "),o=d[0].split("-"),l=new Date(o[0],o[1]-1,o[2]),s=l.getDate(),g=(e=l.getMonth()+1,$j(a.find("td[month="+e+"][day="+s+"]"))),h=parseInt(g.attr("eventCount"));g.html(g.html()+`<dl><dt>${r.arena}</dt><dd>${d[1].substring(0,5)+" &nbsp;F"+r.matchcount}</dd></dl>`),g.attr("eventCount",h+1)}}(e,t.getMonth()+1)}})},raceHandler.getCFMobileRace=function(){let t=new Date;$j("#years").html(t.getFullYear()+" <span>"+I18N.get("month_"+(parseInt(t.getMonth())+1))+"</span>&nbsp;<span>"+I18N.get("cockfight.calendar")+"</span>"),$j("#month").html(I18N.get("month_"+(parseInt(t.getMonth())+1))),$j.ajax({type:"POST",url:PageConfig.getEventInfoUrl,dataType:"JSON",success:function(t){!function(t){let e=new Map;for(let a of t){let t=a.date.split(" ")[0],n=e.get(t)||[];n.push(a),e.set(t,n)}let a=new Date;a.setDate(a.getDate()-1);let n=$j("#raceDayTemp"),r=$j("#receBody");for(let t=0,d=7;t<d;t++){let t=n.clone();t.attr("id",""),(new Date).setHours(0,0,0,0)===a.setHours(0,0,0,0)&&t.addClass("today"),t.find("#week").html(I18N.get("week"+a.getDay()).substring(0,3)),t.find("#day").html(a.getDate());let d=t.find("#arenasTemp"),o=a.getFullYear()+"-"+(a.getMonth()+1+"").padStart(2,"0")+"-"+(""+a.getDate()).padStart(2,"0"),l=e.get(o)||[];for(let e of l){let a=t.find("#arena").clone();a.attr("id",""),a.find("#arenaid").html(e.arena),a.find("#matchTime").html(e.date.split(" ")[1]),a.find("#match").html("F"+e.matchcount),d.append(a.show())}t.show(),r.append(t),a.setDate(a.getDate()+1)}}(t)}})};