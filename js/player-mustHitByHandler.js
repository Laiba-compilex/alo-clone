"undefined"==typeof MustHitByHandler&&(MustHitByHandler={}),function(){MustHitByHandler.mustHitByDatas={};let t={url:"",currency:"",fireOnRatio:.9,timeout:10050,gameHallId:"gameHallDiv",amountItemId:"accumulatedAmt",targetAmtId:"targetAmt",gameIconClass:"show-jackpot-fire",onFireClass:"on-fire",htmlUrl:"",gameTagHtml:"",initCallBack:a,isBuildTargetAmt:!1,platform:""};function e(t){let e=[];for(let a=0;a<t.length;a++){let r=t[a].platform+","+t[a].gameCode;(MustHitByHandler.mustHitByDatas[r]?MustHitByHandler.mustHitByDatas[r].mustHitByPool:0)!=t[a].mustHitByPool&&(MustHitByHandler.mustHitByDatas[r]=t[a],e.push(r))}return e}function a(){for(const e of Object.keys(MustHitByHandler.mustHitByDatas)){let a=MustHitByHandler.mustHitByDatas[e],i=GameEleCache.get(a),l=a.mustHitByValue*t.fireOnRatio,n=a.mustHitByPool>=l;i.forEach(function(e){if("true"!=e.getAttribute("isNotShowMHB")&&!e.classList.contains("challenge-record-item")){e.classList.add(t.gameIconClass),n?e.classList.add(t.onFireClass):e.classList.remove(t.onFireClass);let i=e.querySelector("#"+t.amountItemId);if(null==i&&(e.safeSelector("#gameTagArea").insertAdjacentHTML("afterbegin",t.gameTagHtml),i=e.querySelector("#"+t.amountItemId)),t.isBuildTargetAmt){let r=e.querySelector("#"+t.targetAmtId);null!=r&&(r.innerHTML=NumberFormatUtil.formatNumber(a.mustHitByValue,2))}r(i,NumberFormatUtil.formatNumber(a.mustHitByPool,2))}})}}function r(t,e){let a=$j(t).text();if(!a)return void $j(t).text(e);if(a=a.replace(/\$|\,/g,""),(e=e.replace(/\$|\,/g,""))-a<=0)return void $j(t).text(NumberFormatUtil.formatNumber(e,2));let r=Math.pow(10,2);$j(t).prop("number",a*r).animateNumber({number:e*r,numberStep:function(t,e){let a=Math.floor(t)/r;$j(e.elem).prop("number",t).text(NumberFormatUtil.formatNumber(a,2))},easing:"easeInQuad"},1e4)}MustHitByHandler.initSetting=function(e){return new Promise(a=>{$j.extend(t,e),t.htmlUrl&&postAjax({url:t.htmlUrl+"?"+PageConfig.timestamp,type:"GET",dataType:"html",success:function(e){t.gameTagHtml=e,a()}})})},MustHitByHandler.start=function(){postAjax({url:t.url,data:{currencyType:t.currency,platform:t.platform},success:function(t){MustHitByHandler.initMustHitByInfo(t)},complete:function(t){},error:function(t,e,a){t.responseText&&MenuHandler.showErrorAlert($j.parseJSON(t.responseText).error)}})},MustHitByHandler.processMustHitBy=function(a){if(a.error)return void console.log(a.error);if(0==Object.keys(MustHitByHandler.mustHitByDatas).length)return;let i=e(a);i.length>0&&function(e){e.forEach(function(e){let a=MustHitByHandler.mustHitByDatas[e],i=GameEleCache.get(a),l=a.mustHitByValue*t.fireOnRatio,n=a.mustHitByPool>=l;i.forEach(function(e){if("true"!=e.getAttribute("isNotShowMHB")&&!e.classList.contains("challenge-record-item")){e.classList.add(t.gameIconClass),n?e.classList.add(t.onFireClass):e.classList.remove(t.onFireClass),r(e.safeSelector("#"+t.amountItemId),NumberFormatUtil.formatNumber(a.mustHitByPool,2))}})})}(i)},MustHitByHandler.initMustHitByInfo=function(a){null==a||$j.isEmptyObject(a)||a.error?a.error?MenuHandler.showErrorAlert(a.error):console.log("response="+a):(e(a),"function"==typeof t.initCallBack&&t.initCallBack())},MustHitByHandler.buildGameTag=function(){a()},MustHitByHandler.buildSingleMustHitBy=function(e){let a=(e=$j(e)).attr("platform")+","+e.attr("game_code"),i=MustHitByHandler.mustHitByDatas[a];if(i){e.addClass(t.gameIconClass);let a=i.mustHitByValue*t.fireOnRatio;e.toggleClass(t.onFireClass,i.mustHitByPool>=a);let l=e.find("#"+t.amountItemId);if(0==l.length&&(e.find("#gameTagArea").prepend(t.gameTagHtml),l=e.find("#"+t.amountItemId)),t.isBuildTargetAmt){let a=e.find("#"+t.targetAmtId);a.length>0&&a.html(NumberFormatUtil.formatNumber(i.mustHitByValue,2))}r(l,NumberFormatUtil.formatNumber(i.mustHitByPool,2))}},MustHitByHandler.buildSingleMustHitByWithTemplate=function(e){let a=(e=$j(e)).attr("platform")+","+e.attr("game_code"),i=MustHitByHandler.mustHitByDatas[a];if(i){e.addClass(t.gameIconClass);let a=i.mustHitByValue*t.fireOnRatio;e.toggleClass(t.onFireClass,i.mustHitByPool>=a);let l=e.find("#"+t.amountItemId);0==l.length&&(e.find("#gameTagArea").prepend(SimpleTemplateEngine.getTemplateJqueryElement("mustHitByTagTemplate",i)),l=e.find("#"+t.amountItemId)),r(l,NumberFormatUtil.formatNumber(i.mustHitByPool,2))}}}();